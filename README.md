# Task Comments API

## Описание
Это модуль `REST API` для `CRM` системы, который обрабатывает комментарии к задачам. Он построен с использованием `NestJS`, `TypeORM`, `PostgreSQL` и `TypeScript`.

## Инструкции по запуску

### Предварительные требования
- `Docker` и `Docker Compose`

### Шаги
1. Клонируйте репозиторий.
2. Запустите `docker-compose up --build`, чтобы собрать и запустить приложение и базу данных.

`API` будет доступен по адресу `http://localhost:3000`.
Документация `Swagger` доступна по адресу `http://localhost:3000/api`.

## Обоснование действий
- **TypeORM**: Используется как `ORM` для взаимодействия с `PostgreSQL`, предоставляя чистый и простой в использовании `API`.
- **PostgreSQL**: Требуемая база данных для задачи.
- **Docker**: Используется для контейнеризации приложения и базы данных, обеспечивая согласованность сред.
- **JWT**: Реализован для авторизации пользователей в соответствии с требованиями.
- **Swagger**: Добавлен для документации `API`, чтобы упростить тестирование и понимание `endpoints`.

## Endpoints
- `POST /users`: Создать пользователя (`User`)
- `GET /users/:id`: Получить список пользователей по `ID`
- `GET /users/`: Получить список всех пользователей
- `PATCH /users/:id`: Редактировать пользователя
- `DELETE /users/:id`: Удалить пользователя
- `POST /auth/login`: Войти в систему для получения `JWT token`
- `POST /tasks`: Создать задачу (`Task`) (Только `User`)
- `GET /tasks`: Получить список всех задач
- `GET /tasks/:id`: Получить задачу по `ID`
- `PATCH /tasks/:id`: Редактировать задачу (Только владелец)
- `DELETE /tasks/:id`: Удалить задачу (Только владелец)
- `POST /comments`: Создать комментарий (`Comment`) (Только `Author`)
- `GET /comments?task_id=...`: Получить комментарии для задачи
- `GET /comments/:id`: Получить комментарий по `ID`
- `PATCH /comments/:id`: Обновить комментарий (Только владелец)
- `DELETE /comments/:id`: Удалить комментарий (Только владелец)

## Бизнес-правила
- Только пользователь может редактировать или удалять комментарий.
- Текст комментария обязателен (1-1000 символов).
- Комментарии возвращаются отсортированными по дате (сначала новые).
- Только автор (`Author`) может создать комментарий.
- Только пользователь (`User`) может создать задачу.
- Только пользователь задачи может редактировать или удалять ее.
- Задачи возвращаются отсортированными по дате (сначала новые).
- Каждая задача может иметь несколько комментариев, и комментарий может быть связан только с одной задачей.
